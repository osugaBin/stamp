# PDF 多页盖章工具 - 在线版

一个功能强大的基于 Web 的 PDF 多页盖章工具，支持普通公章和骑缝章两种模式，在线为 PDF 文档添加印章，无需安装任何软件。

## 🚀 在线使用

访问部署地址：[https://osugabin.github.io/riding](https://osugabin.github.io/riding) 或 [riding.pzyt.top](https://riding.pzyt.top)

## 🌟 功能特点

### 📄 基础功能
- **PDF 文件支持**: 支持上传和处理多页 PDF 文档
- **印章管理**: 支持上传各种格式的印章图片（PNG、JPG、GIF 等），白底图片即可
- **精确定位**: 点击或拖拽方式精确放置印章位置
- **尺寸调整**: 灵活调整印章大小（0.01-1.0 倍缩放）
- **页面导航**: 便捷的多页面浏览和编辑
- **在线导出**: 直接在浏览器中生成带印章的 PDF 文件

### 🆕 双模式印章系统
- **普通公章模式**: 传统的单页印章，支持自由拖拽和定位
- **骑缝章模式**: 专业的跨页印章功能，自动按页数分割印章
- **智能切换**: 两种模式可以同时使用，互不干扰
- **位置同步**: 骑缝章支持跨页位置同步，拖动一页其他页自动跟随

### 🎯 骑缝章特色功能
- **自动分割**: 根据PDF页数自动将印章平均竖切分割
- **精确对齐**: 每个分割片段自动对齐到对应页面右边界
- **居中定位**: 默认放置在页面垂直中心位置
- **垂直拖拽**: 支持上下拖动调整位置，水平位置固定
- **比例一致**: 与普通公章使用相同的大小比例设置

### 🎨 用户体验
- **响应式设计**: 完美适配桌面端和移动端设备
- **现代化 UI**: 美观的渐变色界面设计
- **边界检查**: 自动防止印章超出页面边界
- **实时预览**: 所见即所得的印章效果预览

## 📖 使用说明

### 1. 上传文件

- 点击"选择 PDF 文件"按钮上传需要盖章的 PDF 文档
- 点击"选择印章图片"按钮上传印章图片
- 也可以直接拖拽 PDF 文件到预览区域

### 2. 选择印章类型

- **普通公章**: 适用于单页盖章，支持自由定位
- **骑缝章**: 适用于多页文档，自动跨页分割印章
- 可在控制面板中随时切换印章类型
- 两种类型可以同时使用，互不影响

### 3. 添加印章

#### 普通公章模式
- **方法一**: 调整印章大小后，点击"添加印章到当前页"按钮在页面中央添加印章
- **方法二**: 直接点击 PDF 预览区域的任意位置添加印章
- **自由拖拽**: 可以将印章拖拽到页面任意位置

#### 骑缝章模式
- 点击"添加印章到当前页"按钮自动生成骑缝章
- 印章会自动按PDF页数平均分割
- 每个分割片段自动放置在对应页面右边界
- 默认居中显示，可上下拖动调整位置

### 4. 编辑印章

- **移动**: 拖拽印章到目标位置
  - 普通公章：支持水平和垂直方向自由移动
  - 骑缝章：仅支持垂直方向移动，所有页面位置同步
- **选择**: 点击印章或印章列表中的项目进行选择
- **删除**: 选中印章后点击"删除选中印章"按钮
- **清空**: 点击"清空当前页"按钮删除当前页所有印章

### 5. 页面导航

- 使用"上一页"/"下一页"按钮浏览多页 PDF
- 页面信息显示当前页码和总页数
- 普通公章：每页独立管理
- 骑缝章：跨页统一管理，位置自动同步

### 6. 缩放控制

- 使用"+"/"-"按钮调整 PDF 预览缩放级别
- 支持 50%-300%缩放范围

### 7. 导出 PDF

- 完成所有页面的印章添加后，点击"保存盖章 PDF"按钮
- 系统会自动生成带印章的新 PDF 文件并下载
- 支持同时导出普通公章和骑缝章效果

## 🛠️ 技术栈

- **前端框架**: 原生 JavaScript (ES6+)
- **PDF 处理**: PDF.js - Mozilla 的 PDF 渲染库
- **PDF 生成**: jsPDF - 客户端 PDF 生成库
- **图像处理**: Canvas API - 实现印章分割和渲染
- **样式**: CSS3 (Flexbox, Grid, 渐变色)
- **响应式**: CSS 媒体查询
- **部署**: GitHub Pages

### 🔧 核心技术实现

- **印章分割算法**: 使用 Canvas API 实现精确的图像竖切分割
- **跨页同步机制**: 基于事件驱动的位置同步系统
- **拖拽优化**: 高性能的鼠标/触摸事件处理
- **边界检测**: 智能的印章边界约束算法

## 📁 项目结构

```
pdf-stamp-tool/
├── index.html          # 主页面
├── styles.css          # 样式文件
├── app.js             # 主要JavaScript逻辑
├── README.md          # 项目说明
└── .github/
    └── workflows/
        └── deploy.yml  # GitHub Actions部署配置
```

## 🔧 本地开发

1. 克隆项目

```
git clone https://github.com/osugaBin/riding.git
cd riding
```

2. 启动本地服务器

```bash
# 使用Python
python -m http.server 8000

# 或使用Node.js
npx serve .

# 或使用PHP
php -S localhost:8000
```

3. 访问 `http://localhost:8000`

## 🚀 部署到 GitHub Pages

### 方法一：自动部署（推荐）

1. Fork 或上传项目到 GitHub 仓库
2. 在仓库设置中启用 GitHub Pages
3. 选择"GitHub Actions"作为部署源
4. 项目包含的 GitHub Actions 工作流会自动部署

### 方法二：手动部署

1. 在 GitHub 仓库设置中启用 GitHub Pages
2. 选择"Deploy from a branch"
3. 选择"main"分支和"/ (root)"文件夹
4. 保存设置，等待部署完成

## 🌐 Cloudflare 部署

1. 登录 Cloudflare Pages
2. 连接 GitHub 仓库
3. 设置构建配置：
   - 构建命令：留空（静态文件）
   - 构建输出目录：`/`
4. 部署完成后获得 Cloudflare 域名

## 🔒 隐私说明

- 所有文件处理均在浏览器本地完成
- 不会上传任何文件到服务器
- 完全保护用户隐私和数据安全

## 🐛 已知问题

- 大型 PDF 文件可能需要较长加载时间
- 某些复杂 PDF 格式可能存在兼容性问题
- 移动端拖拽体验可能不如桌面端流畅
- 骑缝章功能在页数过多时可能影响性能
- 印章图片质量会影响分割后的显示效果

## 💡 使用建议

- **印章图片**: 建议使用高分辨率、白底透明的PNG格式印章
- **文档页数**: 骑缝章功能在2-20页的文档中效果最佳
- **浏览器**: 推荐使用Chrome、Firefox、Safari等现代浏览器
- **文件大小**: 建议单个PDF文件不超过50MB以获得最佳性能

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进项目！

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

## 🙏 致谢

- [PDF.js](https://mozilla.github.io/pdf.js/) - Mozilla PDF 渲染库
- [jsPDF](https://github.com/parallax/jsPDF) - 客户端 PDF 生成库
- [GitHub Pages](https://pages.github.com/) - 免费静态网站托管
- [Cloudflare Pages](https://pages.cloudflare.com/) - 全球 CDN 加速

---

## ☕ 支持开发

如果这个项目对您有帮助，欢迎请我喝杯咖啡！

<div align="center">
  <img src="buycof.png" alt="Buy me a coffee" width="200"/>
  <br/><br/>
  
  <table>
    <tr>
      <td align="center">
        <img src="Ali$.jpg" alt="支付宝收款码" width="150"/>
        <br/>
        <b>Buy me a coffee</b>
      </td>
      <td align="center">
        <img src="Wx$.jpg" alt="微信收款码" width="150"/>
        <br/>
        <b>请我喝咖啡</b>
      </td>
    </tr>
  </table>
</div>

如果这个项目对您有帮助，请给个 ⭐️ 支持一下！
